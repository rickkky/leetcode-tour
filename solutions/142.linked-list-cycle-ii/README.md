# [142. 环形链表 II](https://leetcode-cn.com/problems/linked-list-cycle-ii)

## [双指针法](./solution_two-pointers.ts)

假设链表有环，设环之前有 A 个节点，按 -A ~ -1 进行编号；环中有 B 个节点，按 0 ~ B - 1 进行编号。

设置快慢两个指针。慢指针速度为 1；快指针速度为 2。两个指针均从头节点开始出发。

当慢指针第一次到达环的入口节点时，向前移动了 A 个位置。此时快指针向前移动了 2A 个位置，假设此时快指针的位置为 i ( < B)，则有：

```
i = (2A - A) % B
  = A % B
```

设接下来慢指针继续前进了 k ( < B) 步，则此时慢指针的位置为 k；快指针的位置为 (i + 2k) % B。

若令 k = B - i，则此时慢指针的位置为 B - i；快指针的位置为：

```
(i + 2k) % B = (2B - i) % B
             = (B - i) % B
             = B - i
```

此时快慢指针的位置相同。

因此，若链表是有环的，快慢指针经过 A + B - A % B 次移动后会第一次相遇，相遇的位置为 B - A % B。

此时指针从该位置开始，继续向前移动 A % B 个位置达到环的入口点。

已知慢指针第一次到达环的入口节点时就是移动了 A % B 个位置。因此设置两个速度均为 1 的指针，一个指针从相遇位置开始出发；另一个指针从头节点开始出发。两个指针第一次相遇的位置即为环的入口位置。
